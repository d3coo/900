<html manifest="psfree_lapse.cache">
  <head>
    <meta charset="utf-8">
    <title>PS4 Jailbreak</title>
    <style>
      body {
        background-image: url('./bg.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        min-height: 100vh;
        color: #1a1a2e;
        font-family: "Segoe UI", Tahoma, sans-serif;
        text-align: center;
      }
      h2 {
        margin-bottom: 20px;
        color: #1a1a2e;
        text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
        font-size: 1.8em;
      }
      #console {
        font-family: monospace;
        background-color: rgba(30, 30, 46, 0.9);
        color: #e0e0e0;
        border: 2px solid #e74c3c;
        padding: 12px;
        border-radius: 10px;
        margin-top: 20px;
        text-align: left;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      }
      #jailbreakBtn {
        margin-top: 20px;
        padding: 14px 32px;
        font-size: 18px;
        font-weight: bold;
        border: none;
        border-radius: 8px;
        background: linear-gradient(135deg, #555555, #444444);
        color: #aaaaaa;
        cursor: not-allowed;
        box-shadow: none;
      }
      footer {
        margin-top: 30px;
        font-size: 14px;
        color: #4a4a6a;
        text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.3);
      }
    </style>
  </head>
  <body>
    <h2>PSFree: A PS4 7.00 - 9.60 Exploit Chain</h2>
    <div>
      <button id="jailbreakBtn">Start Jailbreak</button>
    </div>
    <pre id="console"></pre>
    <footer>
      UI Designed by <strong>Feyzee</strong> Modified by <strong>Ahmed Deco</strong>
    </footer>
  </body>
  <script>
    // Clear history and prevent back navigation
    history.replaceState(null, null, 'index.html');
    var histlength = history.length;
    history.go(-histlength);
    // Logging utility
    const outputConsole = document.getElementById("console");
    window.log = (msg) => { outputConsole.textContent += msg + "\n"; };
    // Download progress (% display)
    function DLProgress(e) {
      const percent = (Math.round((e.loaded / e.total) * 100));
      window.log(`[CACHE] Downloading... ${percent}% complete.`);
    }
    // On cache complete
    function DisplayCacheProgress() {
      window.log(" ");
      window.log("[SUCCESS] Cache installed successfully.");
      window.log("Page will reload in 3 seconds...");
      // Delay to show success message before navigation
      setTimeout(function() { window.log("Reloading..."); }, 2000);
      // Navigate back to index.html to load the exploit from cache
      setTimeout(function() { location.reload(); }, 3000);
    }
    // Event listeners
    window.applicationCache.addEventListener("progress", DLProgress, false);
    window.applicationCache.oncached = function(e) { DisplayCacheProgress(); };
    window.applicationCache.onupdateready = function(e) { DisplayCacheProgress(); };
    // Initialization message on DOM load
    document.addEventListener('DOMContentLoaded', () => {
      outputConsole.textContent = ""; // Clear console log
      window.log("AppCache download initiating...");
      window.log("Please wait, this may take a few seconds.");
    });
  </script>
</html>
